<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Category: ACS sphinx | Треск и скрежет в моей голове]]></title>
  <link href="http://blog.alfss.net//blog/categories/acs-sphinx/atom.xml" rel="self"/>
  <link href="http://blog.alfss.net//"/>
  <updated>2012-11-06T03:35:20+04:00</updated>
  <id>http://blog.alfss.net//</id>
  <author>
    <name><![CDATA[Sergey V. Kravchuk]]></name>
    
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[Кодировка СКУД Sphinx + Rails]]></title>
    <link href="http://blog.alfss.net//post/2011/12/13/kodirovka-skud-sphinx-plus-rails/"/>
    <updated>2011-12-13T01:21:00+04:00</updated>
    <id>http://blog.alfss.net//post/2011/12/13/kodirovka-skud-sphinx-plus-rails</id>
    <content type="html"><![CDATA[<p>Волю случая пришлось залезть в БД данного СКУД.
Все хорошо бы, но разработчикам взбрело хранить данные utf8 в latin1 таблицах.
Rails на это реагирует невнятным бормотанием:</p>

<p>{% codeblock lang:ruby %}
invalid multibyte char (UTF-8)
syntax error, unexpected $end, expecting keyword_end
{% endcodeblock %}</p>

<p>Костыль был найден почти сразу :)</p>

<p>{% codeblock lang:ruby %}
@Parsonal.NAME.force_encoding("UTF-8"))
{% endcodeblock %}</p>

<p>Но правильное решение, это изменить кодировку таблиц.</p>

<p>{% codeblock change_codepage_personal lang:mysql %}
alter table <code>personal</code> convert to character set utf8 collate utf8_general_ci;
{% endcodeblock %}</p>

<p>ps. Письмо я товарищам написал, надеюсь что в новых релизах исправят.</p>
]]></content>
  </entry>
  
</feed>
